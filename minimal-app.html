<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DayTraderAI - Minimal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-bg': '#10111A',
              'brand-surface': '#1C1D2A',
              'brand-text': '#E4E4FB',
            },
          }
        }
      }
    </script>
</head>
<body class="bg-brand-bg text-brand-text">
    <div id="root">
        <div class="p-8">
            <h1 class="text-3xl font-bold mb-4">ðŸš€ DayTraderAI</h1>
            <p class="text-gray-400">Loading real trading data...</p>
        </div>
    </div>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
      }
    }
    </script>
    
    <script type="module">
        import React from 'react';
        import ReactDOM from 'react-dom/client';

        const { useState, useEffect } = React;

        function App() {
            const [stats, setStats] = useState(null);
            const [positions, setPositions] = useState([]);
            const [error, setError] = useState(null);

            useEffect(() => {
                const fetchData = async () => {
                    try {
                        const [metricsRes, positionsRes] = await Promise.all([
                            fetch('http://localhost:8006/metrics'),
                            fetch('http://localhost:8006/positions')
                        ]);
                        
                        const metrics = await metricsRes.json();
                        const pos = await positionsRes.json();
                        
                        setStats(metrics);
                        setPositions(pos);
                    } catch (err) {
                        setError(err.message);
                    }
                };

                fetchData();
                const interval = setInterval(fetchData, 5000);
                return () => clearInterval(interval);
            }, []);

            if (error) {
                return React.createElement('div', { className: 'p-8' },
                    React.createElement('h1', { className: 'text-2xl text-red-500' }, 'âŒ Error'),
                    React.createElement('p', null, error)
                );
            }

            if (!stats) {
                return React.createElement('div', { className: 'p-8' },
                    React.createElement('p', null, 'Loading...')
                );
            }

            return React.createElement('div', { className: 'min-h-screen p-8' },
                // Header
                React.createElement('header', { className: 'mb-8' },
                    React.createElement('h1', { className: 'text-4xl font-bold' }, 'ðŸš€ DayTraderAI'),
                    React.createElement('p', { className: 'text-gray-400' }, 'Real-Time Trading Dashboard')
                ),
                
                // Stats Grid
                React.createElement('div', { className: 'grid grid-cols-4 gap-4 mb-8' },
                    React.createElement('div', { className: 'bg-brand-surface p-4 rounded-lg' },
                        React.createElement('p', { className: 'text-gray-400 text-sm' }, 'Equity'),
                        React.createElement('p', { className: 'text-2xl font-bold' }, '$' + stats.equity.toLocaleString())
                    ),
                    React.createElement('div', { className: 'bg-brand-surface p-4 rounded-lg' },
                        React.createElement('p', { className: 'text-gray-400 text-sm' }, 'Daily P/L'),
                        React.createElement('p', { className: 'text-2xl font-bold ' + (stats.daily_pl >= 0 ? 'text-green-500' : 'text-red-500') }, 
                            '$' + stats.daily_pl.toFixed(2)
                        )
                    ),
                    React.createElement('div', { className: 'bg-brand-surface p-4 rounded-lg' },
                        React.createElement('p', { className: 'text-gray-400 text-sm' }, 'Win Rate'),
                        React.createElement('p', { className: 'text-2xl font-bold' }, (stats.win_rate * 100).toFixed(1) + '%')
                    ),
                    React.createElement('div', { className: 'bg-brand-surface p-4 rounded-lg' },
                        React.createElement('p', { className: 'text-gray-400 text-sm' }, 'Positions'),
                        React.createElement('p', { className: 'text-2xl font-bold' }, stats.open_positions)
                    )
                ),
                
                // Positions Table
                React.createElement('div', { className: 'bg-brand-surface rounded-lg p-6' },
                    React.createElement('h2', { className: 'text-xl font-bold mb-4' }, 'Open Positions'),
                    React.createElement('div', { className: 'overflow-x-auto' },
                        React.createElement('table', { className: 'w-full' },
                            React.createElement('thead', null,
                                React.createElement('tr', { className: 'border-b border-gray-700' },
                                    React.createElement('th', { className: 'text-left p-2' }, 'Symbol'),
                                    React.createElement('th', { className: 'text-right p-2' }, 'Qty'),
                                    React.createElement('th', { className: 'text-right p-2' }, 'Entry'),
                                    React.createElement('th', { className: 'text-right p-2' }, 'Current'),
                                    React.createElement('th', { className: 'text-right p-2' }, 'P/L')
                                )
                            ),
                            React.createElement('tbody', null,
                                positions.map((pos, i) =>
                                    React.createElement('tr', { key: i, className: 'border-b border-gray-800' },
                                        React.createElement('td', { className: 'p-2 font-bold' }, pos.symbol),
                                        React.createElement('td', { className: 'p-2 text-right' }, pos.qty),
                                        React.createElement('td', { className: 'p-2 text-right' }, '$' + pos.avg_entry_price.toFixed(2)),
                                        React.createElement('td', { className: 'p-2 text-right' }, '$' + pos.current_price.toFixed(2)),
                                        React.createElement('td', { className: 'p-2 text-right ' + (pos.unrealized_pl >= 0 ? 'text-green-500' : 'text-red-500') }, 
                                            '$' + pos.unrealized_pl.toFixed(2)
                                        )
                                    )
                                )
                            )
                        )
                    )
                ),
                
                // Footer
                React.createElement('footer', { className: 'mt-8 text-center text-gray-500 text-sm' },
                    React.createElement('p', null, 'âœ… Backend Connected | Updates every 5 seconds')
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
